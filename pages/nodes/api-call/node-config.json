{"output":{"buildship":{},"type":"object","properties":{"data":{"buildship":{"index":1},"description":"The data object from the API response","title":"Data","type":"object"},"status":{"buildship":{"index":0},"description":"The HTTP status of the API response","type":"number","title":"Status"}}},"meta":{"icon":{"svg":"<path d=\"m14 12l-2 2l-2-2l2-2l2 2zm-2-6l2.12 2.12l2.5-2.5L12 1L7.38 5.62l2.5 2.5L12 6zm-6 6l2.12-2.12l-2.5-2.5L1 12l4.62 4.62l2.5-2.5L6 12zm12 0l-2.12 2.12l2.5 2.5L23 12l-4.62-4.62l-2.5 2.5L18 12zm-6 6l-2.12-2.12l-2.5 2.5L12 23l4.62-4.62l-2.5-2.5L12 18z\"></path>","type":"SVG"},"name":"API Call","description":"Make an API call using fetch with provided url, method, contentType, authorization, and body","id":"api-call"},"inputs":{"type":"object","required":["url","shouldAwait","method"],"properties":{"authorization":{"buildship":{"index":2,"sensitive":false},"pattern":"","description":"The authorization header for the API call, if required (e.g., Bearer or Basic token)","title":"Authorization","type":"string"},"method":{"default":"","buildship":{"options":[{"label":"GET","value":"GET"},{"label":"POST","value":"POST"},{"label":"PUT","value":"PUT"},{"label":"DELETE","value":"DELETE"},{"label":"PATCH","value":"PATCH"}],"index":0,"sensitive":false},"pattern":"","description":"The HTTP method to use for the API call","title":"HTTP Method","type":"string","enum":["GET","POST","PUT","DELETE","PATCH"]},"queryParams":{"default":{},"buildship":{"index":3,"sensitive":false},"pattern":"","description":"The query parameters for the API call.\n\nSAMPLE INPUT:\n```\n{ \n  \"query1\": \"value1\",\n  \"query2\": \"value2\"\n}\n```","title":"Query Parameters","type":"object","properties":{}},"shouldAwait":{"buildship":{"index":6,"sensitive":false},"pattern":"","description":"Whether to wait for the request to complete or not","title":"Await?","type":"boolean"},"body":{"buildship":{"index":4},"description":"The body to send with the API call","title":"Body","type":"object"},"contentType":{"buildship":{"options":[{"label":"application/json","value":"application/json"},{"label":"application/x-www-form-urlencoded","value":"application/x-www-form-urlencoded"},{"label":"multipart/form-data","value":"multipart/form-data"},{"label":"text/plain","value":"text/plain"}],"index":5},"description":"The content type of the API call","title":"Content Type","type":"string","enum":["application/json","application/x-www-form-urlencoded","multipart/form-data","text/plain"]},"url":{"buildship":{"index":1},"description":"The URL of the API endpoint","title":"URL","type":"string"}}},"id":"api-call","type":"script","integrations":[],"_libRef":{"integrity":"v3:0d10568667619289a775dc50761a31cd","libNodeRefId":"@buildship/api-call","isDirty":false,"libType":"public","src":"https://storage.googleapis.com/buildship-app-us-central1/publicLib/nodes/@buildship/api-call/1.1.0/build.cjs","version":"1.1.0"},"script":"import fetch from \"node-fetch\";\nexport default async function apiCall({\n    url,\n    method,\n    contentType,\n    authorization,\n    body,\n    shouldAwait,\n    queryParams\n}: NodeInputs, {\n    logging\n}: NodeScriptOptions) : NodeOutput  {\n    const headers = {\n        \"Content-Type\": contentType\n    };\n    if (authorization) headers[\"Authorization\"] = authorization;\n\n    let queryParamsString = '';\n    if (queryParams) {\n        queryParamsString = '?' + new URLSearchParams(queryParams).toString();\n    }\n\n    const fetchOptions = {\n        method,\n        headers\n    };\n\n    if (method !== 'GET') {\n        fetchOptions.body = JSON.stringify(body);\n    }\n\n    const fetchPromise = fetch(url + queryParamsString, fetchOptions);\n\n    if (!shouldAwait) {\n        return {\n            data: null\n        };\n    }\n\n    const response = await fetchPromise;\n    const data = await response.json();\n    return {\n        status: response.status,\n        data\n    };\n}","dependencies":{"node-fetch":"3.3.2"}}